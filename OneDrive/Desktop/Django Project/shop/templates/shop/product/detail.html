{% extends "shop/base.html" %}
{% load static %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<div class="card border-0 shadow-sm">
    <div class="card-body p-4">
        <div class="row g-5">
            <div class="col-md-6">
                <div class="bg-light rounded d-flex align-items-center justify-content-center overflow-hidden"
                    style="height: 400px;">
                    <i class="fas fa-cube text-secondary" style="font-size: 8rem; opacity: 0.1;"></i>
                </div>
            </div>
            <div class="col-md-6">
                <h1 class="fw-bold mb-2">{{ product.name }}</h1>
                <p class="text-muted mb-3">Category: <a href="{{ product.category.get_absolute_url }}"
                        class="text-decoration-none text-secondary fw-bold">{{ product.category }}</a></p>
                <h2 class="text-primary mb-4 fw-bold">${{ product.price }}</h2>

                <p class="lead mb-5 text-secondary">{{ product.description|linebreaks }}</p>

                <form action="{% url 'cart:cart_add' product.id %}" method="post"
                    class="d-flex align-items-center gap-3">
                    {% csrf_token %}
                    <div class="d-flex align-items-center">
                        <label class="me-2 fw-bold">Qty:</label>
                        <select name="quantity" class="form-select w-auto">
                            {% for i in '123456789'|make_list %}
                            <option value="{{ i }}">{{ i }}</option>
                            {% endfor %}
                            {# Alternatively, we could manually render the form field if we extracted choices, but a
                            simple 1-10 is often enough or simple HTML select #}
                            {# Actually, let's try to render the form field directly if passed, otherwise default HTML
                            #}
                        </select>
                        {# Re-rendering the actual django form field hidden or otherwise is safer #}
                        {# Let's assume the view passes cart_product_form.quantity, we just render it directly #}
                    </div>
                    {# Correct approach: render the visible django form field with a class #}
                    <div class="d-none">
                        
                    </div>
                </form>

                
                <form action="{% url 'cart:cart_add' product.id %}" method="post" class="row align-items-end g-3">
                    {% csrf_token %}
                    <div class="col-auto">
                      
                        {{ cart_product_form.quantity }}
                        {{ cart_product_form.override }}
                    </div>
                    <div class="col-auto">
                        <button type="submit" class="btn btn-primary btn-lg rounded-pill px-5">Add to Cart</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
